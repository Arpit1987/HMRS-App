name: AI PR Review

on:
  pull_request:
    types: [opened, synchronize, reopened]

permissions:
  contents: read
  pull-requests: write

jobs:
  java-code-review:
    name: Java Code Review
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      
    - name: Hardcoded Java Review
      run: |
        echo "üîç Starting Hardcoded Java Code Review"
        echo "======================================"
        
        # Define hardcoded review comments
        echo "## Code Review Summary for TestAiReview.java" >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        
        echo "‚ùå **Issue 1: Poor validation in add method**" >> $GITHUB_STEP_SUMMARY
        echo "   - Method 'add' lacks proper input validation" >> $GITHUB_STEP_SUMMARY
        echo "   - No bounds checking for integer overflow" >> $GITHUB_STEP_SUMMARY
        echo "   - Consider adding parameter validation" >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        
        echo "‚ùå **Issue 2: Incorrect string concatenation**" >> $GITHUB_STEP_SUMMARY
        echo "   - String concatenation in println may not show expected output" >> $GITHUB_STEP_SUMMARY
        echo "   - Use proper formatting: \"Adding numbers: \" + (a + b) or String.format()" >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        
        echo "‚ùå **Issue 3: No divide-by-zero handling**" >> $GITHUB_STEP_SUMMARY
        echo "   - Method 'divide' doesn't handle division by zero" >> $GITHUB_STEP_SUMMARY
        echo "   - Add check: if (b == 0) throw new IllegalArgumentException(\"Divisor cannot be zero\")" >> $GITHUB_STEP_SUMMARY
        echo "   - Or return a default value with proper documentation" >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        
        echo "‚ö†Ô∏è **Issue 4: Unused method**" >> $GITHUB_STEP_SUMMARY
        echo "   - Method 'formatMessage' is defined but not used in main" >> $GITHUB_STEP_SUMMARY
        echo "   - Consider removing if not needed, or add @Deprecated annotation" >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        
        echo "‚ö†Ô∏è **Issue 5: Poor logging practice**" >> $GITHUB_STEP_SUMMARY
        echo "   - Using System.out.println for logging in production code" >> $GITHUB_STEP_SUMMARY
        echo "   - Consider using proper logging framework (SLF4J, Log4j)" >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        
        echo "üìù **Suggestion: Add documentation**" >> $GITHUB_STEP_SUMMARY
        echo "   - Consider adding Javadoc comments for public methods" >> $GITHUB_STEP_SUMMARY
        echo "   - Document method parameters, return values, and exceptions" >> $GITHUB_STEP_SUMMARY
        
        # Also print to console
        echo "## Code Review Summary for TestAiReview.java"
        echo ""
        echo "‚ùå **Issue 1: Poor validation in add method**"
        echo "   - Method 'add' lacks proper input validation"
        echo "   - No bounds checking for integer overflow"
        echo "   - Consider adding parameter validation"
        echo ""
        echo "‚ùå **Issue 2: Incorrect string concatenation**"
        echo "   - String concatenation in println may not show expected output"
        echo "   - Use proper formatting: \"Adding numbers: \" + (a + b) or String.format()"
        echo ""
        echo "‚ùå **Issue 3: No divide-by-zero handling**"
        echo "   - Method 'divide' doesn't handle division by zero"
        echo "   - Add check: if (b == 0) throw new IllegalArgumentException(\"Divisor cannot be zero\")"
        echo "   - Or return a default value with proper documentation"
        echo ""
        echo "‚ö†Ô∏è **Issue 4: Unused method**"
        echo "   - Method 'formatMessage' is defined but not used in main"
        echo "   - Consider removing if not needed, or add @Deprecated annotation"
        echo ""
        echo "‚ö†Ô∏è **Issue 5: Poor logging practice**"
        echo "   - Using System.out.println for logging in production code"
        echo "   - Consider using proper logging framework (SLF4J, Log4j)"
        echo ""
        echo "üìù **Suggestion: Add documentation**"
        echo "   - Consider adding Javadoc comments for public methods"
        echo "   - Document method parameters, return values, and exceptions"
        
        echo ""
        echo "‚úÖ Hardcoded Java review completed"